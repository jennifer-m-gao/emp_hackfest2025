<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="peopleContainer"></div>
    <script>
    const statuses = [
        { name: "stable", minHR: 60, maxHR: 100, probability: 0.6, minTemp: 97, maxTemp: 100},
        { name: "critical", minHR: 40, maxHR: 60, probability: 0.3, minTemp: 95, maxTemp: 96.99},
        { name: "dying", minHR: 0, maxHR: 40, probability: 0.1, minTemp: 90, maxTemp: 95}
    ];

    function pickStatus() {
        const randomNum = Math.floor(Math.random() * 10) + 1;
        if (randomNum <= 7){
            return statuses[0];
        } else if (randomNum <= 9){
            return statuses[1];
        } else {
            return statuses[2];
        }   
    }

    function Person(age, gender){
        this.age = age;
        this.gender = gender;
        this.status = pickStatus();
        this.heartRate = Math.random() * (this.status.maxHR - this.status.minHR) + this.status.minHR;
        this.bodyTemp = Math.random() * (this.status.maxTemp - this.status.minTemp) + this.status.minTemp;
    }

    function updatePerson(person){
        let change;
        switch(person.status.name) {
            case "stable":
                change = Math.random() * 1 - 1;
                break;
            case "critical":
                change = Math.random() * 2 - 2;
                break;
            case "dying":
                change = Math.random() * 4 - 5;
                break;
        }
        person.heartRate += change;

        if (person.heartRate > 60){
            person.status = statuses[0];
        } else if (person.heartRate > 40){
            person.status = statuses[1];
        } else {
            person.status = statuses[2];
        }

        let chance = Math.random();
        switch(person.status.name){
            case "stable":
                person.bodyTemp += chance > 0.5 ? Math.random() * 2 : -Math.random() * 2;
                break;
            case "critical":
                person.bodyTemp += chance > 0.5 ? Math.random() * 4 : -Math.random() * 4;
                break;
            case "dying":
                person.bodyTemp += chance > 0.5 ? Math.random() * 6 : -Math.random() * 6;
                break;
        }
    }

    const people = [];
    people.push(new Person(30, "female"));

    function renderPeople() {
        const container = document.getElementById("peopleContainer");
        container.innerHTML = "";
        people.forEach(person => {
            const div = document.createElement("div");
            div.textContent = `${person.age} yo ${person.gender}: ${Math.round(person.bodyTemp)}Â°F, ${Math.round(person.heartRate)} bpm (${person.status.name})`;
            div.style.color = person.status.name === "stable" ? "green" :
                            person.status.name === "critical" ? "orange" : "red";
            container.appendChild(div);
        });
    }

    renderPeople();

    setInterval(() => {
        people.forEach(updatePerson);
        renderPeople();
    }, 2000);
</script>

</body>
</html>